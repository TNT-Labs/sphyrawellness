# ========================================
# Sphyra Wellness Lab - Configurazione DuckDNS
# HTTPS con certificati validi senza porta 80
# ========================================
# METODO: DNS-01 Challenge con DuckDNS
#
# REQUISITI:
# - Porta 443 instradata verso questo server (192.168.1.75)
# - Account DuckDNS attivo (gratuito)
# - Token API DuckDNS
# ========================================

# ========================================
# 1. CONFIGURAZIONE DOMINIO
# ========================================
# Il tuo dominio DuckDNS (OBBLIGATORIO)
# Esempio: sphyrawellnesslab.duckdns.org
DOMAIN=sphyrawellnesslab.duckdns.org

# La tua email per le notifiche Let's Encrypt (OBBLIGATORIO)
# Riceverai notifiche di scadenza certificati
EMAIL=tua@email.com

# ========================================
# 2. TOKEN DUCKDNS (OBBLIGATORIO)
# ========================================
# Per ottenere il token DuckDNS:
# 1. Vai su https://www.duckdns.org
# 2. Fai login (Google, GitHub, ecc.)
# 3. Copia il token dalla pagina principale (in alto)
# 4. Incollalo qui sotto
#
# IMPORTANTE: Mantieni questo token SEGRETO!
DUCKDNS_TOKEN=your-duckdns-token-here

# ========================================
# 3. CONFIGURAZIONE DATABASE (PostgreSQL)
# ========================================
POSTGRES_DB=sphyra_wellness
POSTGRES_USER=sphyra_user
# IMPORTANTE: Cambia questa password!
POSTGRES_PASSWORD=your-secure-password-here

# ========================================
# 4. CONFIGURAZIONE BACKEND
# ========================================
# JWT Secret per autenticazione (OBBLIGATORIO)
# Genera una stringa casuale sicura (almeno 32 caratteri)
# Puoi usare: openssl rand -base64 32
JWT_SECRET=your-jwt-secret-here-change-me-use-openssl-rand-base64-32

# Durata token JWT (default: 7 giorni)
JWT_EXPIRES_IN=7d

# ========================================
# 5. EMAIL E SMS (Opzionale ma IMPORTANTE)
# ========================================
# SendGrid per invio email reminder

# ⚠️  IMPORTANTE: CONFIGURAZIONE EMAIL PER EVITARE SPAM ⚠️
#
# NON usare indirizzi Gmail/Yahoo/Hotmail (es. NON usare bel.arancio@gmail.com)!
# Le email inviate tramite SendGrid con mittente Gmail FINISCONO IN SPAM perché:
# - Gmail rileva che l'email NON viene dai loro server
# - Mancano i record SPF/DKIM/DMARC
# - Risultato: "gmail.com doesn't seem to be the real sender"
#
# SOLUZIONE (OBBLIGATORIA per evitare spam):
# 1. Leggi la guida: SENDGRID_DOMAIN_AUTH_GUIDE.md
# 2. Configura Domain Authentication in SendGrid (https://app.sendgrid.com)
# 3. Aggiungi i record DNS richiesti (SPF, DKIM)
# 4. Usa un indirizzo del TUO dominio verificato
#
# Opzioni per il mittente:
# A) Usa il dominio DuckDNS (se supporta record DNS completi):
#    SENDGRID_FROM_EMAIL=noreply@sphyrawellnesslab.duckdns.org
#
# B) Compra un dominio economico (consigliato, ~10€/anno):
#    - sphyrawellness.it o simile
#    - Configura DNS su Cloudflare (gratis)
#    - SENDGRID_FROM_EMAIL=noreply@sphyrawellness.it
#
# Senza configurazione corretta, il 90%+ delle email va in SPAM!
#
SENDGRID_API_KEY=SG.your-sendgrid-api-key-here
SENDGRID_FROM_EMAIL=noreply@sphyrawellnesslab.duckdns.org
SENDGRID_FROM_NAME=Sphyra Wellness Lab

# Twilio per SMS (opzionale)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# ========================================
# 6. CONFIGURAZIONE FRONTEND
# ========================================
# Password iniziale admin
# ⚠️ IMPORTANTE: Cambia questa password prima del deploy!
VITE_ADMIN_INITIAL_PASSWORD=admin123

# ========================================
# ISTRUZIONI PER L'USO
# ========================================
#
# SETUP INIZIALE:
# ---------------
# 1. Copia questo file in .env:
#    cp .env.duckdns.example .env
#
# 2. Modifica .env con i tuoi valori:
#    nano .env
#    (Compila almeno: DOMAIN, EMAIL, DUCKDNS_TOKEN)
#
# 3. Ottieni i certificati SSL:
#    ./scripts/get-cert-duckdns.sh
#
# 4. Avvia l'applicazione:
#    docker compose -f docker-compose.duckdns.yml up -d
#
# 5. Verifica che funzioni:
#    https://sphyrawellnesslab.duckdns.org
#
# CONFIGURAZIONE ROUTER FASTWEB:
# ------------------------------
# Nel pannello del router Fastweb:
# - Porta esterna: 443
# - Porta interna: 443
# - Protocollo: TCP
# - IP destinazione: 192.168.1.75
# - NOTA: La porta 80 NON è necessaria!
#
# RINNOVO AUTOMATICO:
# ------------------
# I certificati sono validi per 90 giorni.
# Il rinnovo automatico è già configurato nel docker-compose.
# Certbot verificherà e rinnoverà i certificati ogni 12 ore.
#
# TROUBLESHOOTING:
# ---------------
# Se il certificato non si ottiene:
# 1. Verifica che il token DuckDNS sia corretto
# 2. Verifica che il dominio su DuckDNS punti all'IP pubblico
# 3. Controlla i log: docker compose -f docker-compose.duckdns.yml logs certbot
#
# ========================================
